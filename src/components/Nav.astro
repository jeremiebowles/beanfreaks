---
const base = import.meta.env.BASE_URL;
const primaryItems = [
  { href: base, label: 'Home' },
  { href: base + 'roath/', label: 'Roath' },
  { href: base + 'canton/', label: 'Canton' },
  { href: base + 'royal/', label: 'Royal Arcade' },
];
const actionItems = [
  { href: base + 'history/', label: 'History' },
  { href: base + 'posts/', label: 'News' },
  { href: base + 'contact/', label: 'Contact' },
];
const allItems = [...primaryItems, ...actionItems];
const path = Astro.url.pathname;
const isActive = (href) => path === new URL(href, Astro.url).pathname;
---
<header class="sticky top-0 z-50 border-b border-moss/30 bg-moss text-cream">
  <div class="container-bf py-[0.825rem]">
    <div class="flex flex-wrap items-center justify-between gap-4">
      <a class="flex items-baseline gap-2" href={base} aria-label="Beanfreaks home">
        <span class="logo-wordmark text-cream text-[1.8rem] sm:text-[2.25rem]">Beanfreaks</span>
        <span class="logo-wordmark text-cream/80 text-[0.6rem] sm:text-xs uppercase tracking-[0.2em] leading-none translate-y-[0.08rem]">est. 1978</span>
      </a>
      <details class="relative hidden [@media(min-width:640px)_and_(max-width:767px)_and_(orientation:landscape)]:block">
        <summary class="btn-accent inline-flex cursor-pointer list-none select-none">Menu</summary>
        <nav class="absolute right-0 mt-2 w-max max-w-[90vw] rounded-[var(--radius-card)] border border-cream/20 bg-moss/95 p-3 shadow-lg">
          {allItems.map((it, idx) => (
            <>
              {idx === 1 && <span class="text-cream/70" aria-hidden="true">|</span>}
              {idx === primaryItems.length && <span class="text-cream/70" aria-hidden="true">|</span>}
              <a
                href={it.href}
                class:list={[
                  'btn-accent text-xs px-3 py-1.5'
                ]}
              >
                {it.label}
              </a>
            </>
          ))}
        </nav>
      </details>

      <nav class="hidden items-center gap-3 md:flex">
        {primaryItems.map((it, idx) => (
          <>
            {idx === 1 && (
              <span class="mx-1 hidden text-cream/70 md:inline-flex" aria-hidden="true">|</span>
            )}
            <a
              href={it.href}
              class:list={[
                'btn-accent whitespace-nowrap'
              ]}
            >
              {it.label}
            </a>
            {idx === primaryItems.length - 1 && (
              <span class="mx-1 hidden text-cream/70 md:inline-flex" aria-hidden="true">|</span>
            )}
          </>
        ))}
      </nav>

      <div class="hidden items-center gap-2 md:flex">
        {actionItems.map((it, idx) => (
          <>
            <a
              href={it.href}
              class:list={[
                'btn-accent whitespace-nowrap hidden sm:inline-flex'
              ]}
            >
              {it.label}
            </a>
          </>
        ))}
      </div>
    </div>

    <nav class="mt-3 flex flex-wrap gap-2 sm:hidden">
      {allItems.map((it, idx) => (
        <>
          {idx === 1 && <span class="text-cream/70" aria-hidden="true">|</span>}
          {idx === primaryItems.length && <span class="text-cream/70" aria-hidden="true">|</span>}
          <a
            href={it.href}
            class:list={[
              'btn-accent text-xs px-3 py-1.5'
            ]}
          >
            {it.label}
          </a>
        </>
      ))}
    </nav>
  </div>
</header>
