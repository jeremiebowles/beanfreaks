---
import Base from "../../layouts/base.astro";
import { getCollection } from "astro:content";

const guides = await getCollection("guides");
const baseUrl = import.meta.env.BASE_URL;
const go = (p) => `${baseUrl}${String(p).replace(/^\/+/, "")}`;
---
<Base title="Guides — Beanfreaks">
  <div class="bf-kicker">Discover something new</div>
  <h1 class="bf-h1 mt-3">Guides</h1>

  <div class="mt-8 grid gap-6 md:grid-cols-3">
    {guides.map((g) => (
      <a class="bf-card bf-card-pad no-underline hover:-translate-y-0.5 transition" href={go(`/guides/${g.slug}/`)}>
        <div class="text-lg font-semibold">{g.data?.title ?? g.slug}</div>
        <p class="mt-3 text-slate-700 text-sm leading-relaxed">
          {g.data?.summary ?? "Practical advice for healthier living."}
        </p>
        <div class="mt-4 text-sm font-semibold text-leaf">Open →</div>
      </a>
    ))}
  </div>
</Base>
