---
import Base from '../../layouts/base.astro';

export async function getStaticPaths() {
  const posts = await Astro.glob('../../content/posts/*.md');
  return posts.map((p) => ({
    params: { slug: p.file.split('/').pop().replace(/\.md$/, '') },
    props: { post: p }
  }));
}

const { post } = Astro.props;
const { Content } = await post;
const title = post.frontmatter?.title ?? 'Post';
const date = post.frontmatter?.date ?? '';
---
<Base title={`${title} | Beanfreaks`} description={title}>
  <article class="prose prose-zinc max-w-none">
    <h1>{title}</h1>
    {date && <p class="text-sm text-zinc-600">{date}</p>}
    <Content />
  </article>
</Base>
