---
import Base from '../../layouts/base.astro';
import { getCollection } from 'astro:content';

export async function getStaticPaths() {
  const posts = await getCollection('posts');
  return posts.map((post) => ({ params: { slug: post.slug }, props: { post } }));
}

const { post } = Astro.props;
const { Content } = await post.render();
---
<Base title={post.data.title + ' â€” Beanfreaks'} description={post.data.description ?? ''}>
  <section class="bg-cream">
    <div class="container-bf py-12 sm:py-16">
      <article class="mx-auto max-w-3xl">
        <p class="text-sm font-semibold text-ink/60">{post.data.pubDate.toISOString().slice(0,10)}</p>
        <h1 class="mt-3 text-3xl font-extrabold tracking-tight sm:text-4xl">{post.data.title}</h1>
        {post.data.description && <p class="mt-3 text-lg text-muted">{post.data.description}</p>}

        <div class="prose prose-zinc mt-8 max-w-none">
          <Content />
        </div>
      </article>
    </div>
  </section>
</Base>
