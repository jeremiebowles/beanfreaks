---
import Base from '../../layouts/base.astro';
const posts = await Astro.glob('../../content/posts/*.md');
const items = posts
  .map((p) => ({
    slug: p.file.split('/').pop().replace(/\.md$/, ''),
    title: p.frontmatter?.title ?? 'Untitled',
    date: p.frontmatter?.date ?? ''
  }))
  .sort((a, b) => String(b.date).localeCompare(String(a.date)));
---
<Base title="Posts | Beanfreaks" description="Deals and events">
  <h1 class="text-3xl font-semibold tracking-tight">Posts</h1>
  <ul class="mt-6 space-y-3">
    {items.map((p) => (
      <li>
        <a class="underline" href={import.meta.env.BASE_URL + `posts/${p.slug}/`}>{p.title}</a>
        {p.date && <span class="ml-2 text-sm text-zinc-600">{p.date}</span>}
      </li>
    ))}
  </ul>
</Base>
