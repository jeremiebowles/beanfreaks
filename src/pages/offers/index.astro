---
import Base from "../../layouts/base.astro";
import { getCollection } from "astro:content";

const offers = await getCollection("offers");
const baseUrl = import.meta.env.BASE_URL;
const go = (p) => `${baseUrl}${String(p).replace(/^\/+/, "")}`;
---
<Base title="Offers — Beanfreaks">
  <div class="bf-kicker">Deals and events</div>
  <h1 class="bf-h1 mt-3">Offers</h1>

  <div class="mt-8 grid gap-6 md:grid-cols-3">
    {offers.map((o) => (
      <a class="bf-card bf-card-pad no-underline hover:-translate-y-0.5 transition" href={go(`/offers/${o.slug}/`)}>
        <div class="text-lg font-semibold">{o.data?.title ?? o.slug}</div>
        <p class="mt-3 text-slate-700 text-sm leading-relaxed">
          {o.data?.summary ?? "Offers and promotions coming up in your local store."}
        </p>
        <div class="mt-4 text-sm font-semibold text-leaf">Read more →</div>
      </a>
    ))}
  </div>
</Base>
