---
import "../styles/global.css";

// Robust base-path helper for GitHub Pages (/beanfreaks/)
const basePath = import.meta.env.BASE_URL.endsWith("/")
  ? import.meta.env.BASE_URL
  : `${import.meta.env.BASE_URL}/`;

const site = import.meta.env.SITE || "https://example.invalid";
const BASE = new URL(basePath, site);
const href = (path) => new URL(path, BASE).pathname;

// Optional: allow per-page titles
const { title = "Beanfreaks" } = Astro.props;
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>{title}</title>
  </head>

  <body class="min-h-screen bg-white text-slate-900">
    <header class="border-b">
      <nav class="mx-auto max-w-5xl flex items-center gap-6 p-4">
        <a class="font-semibold" href={href("")}>Beanfreaks</a>
        <a class="hover:underline" href={href("stores/")}>Stores</a>
        <a class="hover:underline" href={href("offers/")}>Offers</a>
        <a class="hover:underline" href={href("guides/")}>Guides</a>
        <a class="hover:underline ml-auto" href={href("contact/")}>Contact</a>
      </nav>
    </header>

    <main class="mx-auto max-w-5xl p-4">
      <slot />
    </main>
  </body>
</html>

